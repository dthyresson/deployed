# Migration `20200717124205-migration`

This migration has been generated by A. David Thyresson at 7/17/2020, 12:42:05 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE  INDEX "AccessToken.secret" ON "public"."AccessToken"("secret")

CREATE  INDEX "Deploy.status" ON "public"."Deploy"("status")

CREATE  INDEX "Deploy.buildId" ON "public"."Deploy"("buildId")

CREATE  INDEX "Site.name" ON "public"."Site"("name")

CREATE  INDEX "SiteToken.secret" ON "public"."SiteToken"("secret")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200717111232-migration..20200717124205-migration
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource DS {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider      = "prisma-client-js"
@@ -34,8 +34,10 @@
   secret    String
   revokedAt DateTime?
   User      User      @relation(fields: [userId], references: [id])
   userId    Int
+
+  @@index([secret])
 }
 model Site {
   id         String      @id
@@ -46,8 +48,10 @@
   user       User        @relation(fields: [userId], references: [id])
   userId     Int
   deploys    Deploy[]
   siteTokens SiteToken[]
+
+  @@index([name])
 }
 model SiteToken {
   id        Int       @id @default(autoincrement())
@@ -57,8 +61,10 @@
   secret    String
   revokedAt DateTime?
   site      Site      @relation(fields: [siteId], references: [id])
   siteId    String
+
+  @@index([secret])
 }
 model Deploy {
   id                     String    @id
@@ -91,5 +97,8 @@
   site                   Site      @relation(fields: [siteId], references: [id])
   siteId                 String
   User                   User      @relation(fields: [userId], references: [id])
   userId                 Int
+
+  @@index([status])
+  @@index([buildId])
 }
```


