# Migration `20200712092341-migration`

This migration has been generated by A. David Thyresson at 7/12/2020, 9:23:41 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."User" (
"avatarUrl" TEXT NOT NULL  ,"createdAt" DATE NOT NULL DEFAULT CURRENT_TIMESTAMP ,"email" TEXT NOT NULL  ,"fullName" TEXT NOT NULL  ,"uid" TEXT NOT NULL  ,"updatedAt" DATE NOT NULL DEFAULT CURRENT_TIMESTAMP ,
    PRIMARY KEY ("uid"))

CREATE TABLE "quaint"."Site" (
"accountName" TEXT NOT NULL  ,"accountSlug" TEXT NOT NULL  ,"createdAt" DATE NOT NULL  ,"id" TEXT NOT NULL  ,"name" TEXT NOT NULL  ,"screenshotUrl" TEXT NOT NULL  ,"updatedAt" DATE NOT NULL  ,"url" TEXT NOT NULL  ,"userId" TEXT NOT NULL  ,
    PRIMARY KEY ("id"),FOREIGN KEY ("userId") REFERENCES "User"("uid") ON DELETE CASCADE ON UPDATE CASCADE)

CREATE TABLE "quaint"."Deploy" (
"createdAt" DATE NOT NULL  ,"id" TEXT NOT NULL  ,"locked" BOOLEAN NOT NULL  ,"name" TEXT NOT NULL  ,"publishedAt" DATE NOT NULL  ,"siteId" TEXT NOT NULL  ,"title" TEXT NOT NULL  ,"updatedAt" DATE NOT NULL  ,"url" TEXT NOT NULL  ,"userId" TEXT NOT NULL  ,
    PRIMARY KEY ("id"),FOREIGN KEY ("siteId") REFERENCES "Site"("id") ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY ("userId") REFERENCES "User"("uid") ON DELETE CASCADE ON UPDATE CASCADE)

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200712092341-migration
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,51 @@
+datasource DS {
+  provider = "sqlite"
+  url = "***"
+}
+
+generator client {
+  provider      = "prisma-client-js"
+  binaryTargets = env("BINARY_TARGET")
+}
+
+// See: Netlify Open API for attributes: https://docs.netlify.com/
+
+model User {
+  uid       String   @id
+  createdAt DateTime @default(now())
+  updatedAt DateTime @default(now())
+  fullName  String
+  avatarUrl String
+  email     String
+  site      Site[]
+  deploy    Deploy[]
+}
+
+model Site {
+  id            String   @id
+  createdAt     DateTime
+  updatedAt     DateTime
+  name          String
+  accountName   String
+  accountSlug   String
+  url           String
+  screenshotUrl String
+  user          User     @relation(fields: [userId], references: [uid])
+  userId        String
+  deploys       Deploy[]
+}
+
+model Deploy {
+  id          String   @id
+  createdAt   DateTime
+  updatedAt   DateTime
+  publishedAt DateTime
+  siteId      String
+  userId      String
+  name        String
+  title       String
+  url         String
+  locked      Boolean
+  site        Site     @relation(fields: [siteId], references: [id])
+  user        User     @relation(fields: [userId], references: [uid])
+}
```


